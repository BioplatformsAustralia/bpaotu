FROM continuumio/miniconda3

# Create and activate a conda environment with Python 3.9, numpy, scipy
RUN conda create -n perf python=3.9 numpy pandas scipy numba -y \
    && conda clean --all --yes

# Activate the environment and install fastdist via pip
RUN /bin/bash -c "source activate perf && pip install fastdist"

# Set conda env as default (so `python` just works)
ENV PATH /opt/conda/envs/perf/bin:$PATH

# Working directory (will be overridden by docker-compose anyway)
WORKDIR /app

